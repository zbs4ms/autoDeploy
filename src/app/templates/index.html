<!-- extend base layout -->
{% extends "base.html" %}

{% block content %}
<h1>Hi, {{user.nickname}}!</h1>
{% for post in posts %}
    <p>
    {{post.author.nickname}} says: <b>{{post.body}}</b>
</p>
{% endfor %}
    <div ng-app="App">
        <table ng-controller="tableController">
            <tr><th ng-repeat="head in table[0]">((head.key))</th></tr>
            <tr ng-repeat="rows in table">
                <td ng-repeat="l in rows">
			<span ng-if="l.has_child==1">
				<a href="javascript:void(0)" ng-click="expandSubLevel(l)">*</a>
			</span>((l.value))
                </td>
            </tr>
        </table>
    </div>
{% endblock %}
{% block script %}

<script>

    App.controller("tableController", function($scope) {
        $scope.table = aa();

        $scope.expandSubLevel = function(item) {
            alert(item.id)
        };
    })

    function aa(){
        return [[{'has_child': 1, 'level': 0, 'value': 'AdSense', 'key': 'network_name', 'id': 1}, {'value': 39.0, 'key': 'click_count'}, {'value': 18.0, 'key': 'distinct_click_count'}, {'value': 15.0, 'key': 'install_count'}, {'value': 0.83, 'key': 'conversion'}, {'value': 1090.0, 'key': 'revenue'}, {'value': 9.75, 'key': 'avg.DA'}, {'value': 3.5, 'key': 'avg.DP'}, {'value': 15.58, 'key': 'avg.ARP'}, {'value': 40.58, 'key': 'avg.ARPP'}], [{'has_child': 0, 'level': 0, 'value': 'ValueClick', 'key': 'network_name', 'id': 2}, {'value': 15.0, 'key': 'click_count'}, {'value': 1.0, 'key': 'distinct_click_count'}, {'value': 0.0, 'key': 'install_count'}, {'value': '--', 'key': 'conversion'}, {'value': '--', 'key': 'revenue'}, {'value': '--', 'key': 'avg.DA'}, {'value': '--', 'key': 'avg.DP'}, {'value': '--', 'key': 'avg.ARP'}, {'value': '--', 'key': 'avg.ARPP'}], [{'value': 'organic_error', 'key': 'network_name', 'id': 0}, {'value': 0, 'key': 'click_count'}, {'value': 0, 'key': 'distinct_click_count'}, {'value': 12.0, 'key': 'install_count'}, {'value': 0, 'key': 'conversion'}, {'value': 60.0, 'key': 'revenue'}, {'value': 1.0, 'key': 'avg.DA'}, {'value': 1.0, 'key': 'avg.DP'}, {'value': 60.0, 'key': 'avg.ARP'}, {'value': 60.0, 'key': 'avg.ARPP'}], [{'value': 'organic', 'key': 'network_name', 'id': 0}, {'value': 0, 'key': 'click_count'}, {'value': 0, 'key': 'distinct_click_count'}, {'value': 13.0, 'key': 'install_count'}, {'value': 0, 'key': 'conversion'}, {'value': 180.0, 'key': 'revenue'}, {'value': 5.5, 'key': 'avg.DA'}, {'value': 2.5, 'key': 'avg.DP'}, {'value': 16.67, 'key': 'avg.ARP'}, {'value': 38.33, 'key': 'avg.ARPP'}]];
    }
</script>

{% endblock %}